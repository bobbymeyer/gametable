<div class="mx-auto max-w-7xl px-4 py-8 text-left">
  <div class="mb-6 flex items-center justify-between">
    <div>
      <%= link_to "Series", series_index_path, class: "text-sm text-stone-600 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-300" %>
      <h1 class="text-3xl font-bold text-stone-900 dark:text-white mt-1"><%= @series.name %></h1>
    </div>
    <% if @series.producer?(current_user) %>
      <div class="flex gap-2">
        <%= link_to "Edit", edit_series_path(@series), class: "border border-stone-400 dark:border-stone-600 px-4 py-2 text-sm font-medium text-stone-700 dark:text-stone-300 hover:bg-stone-200 dark:hover:bg-stone-800/50 transition-colors" %>
        <%= button_to "Delete", @series, method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "border border-red-600 dark:border-red-800 px-4 py-2 text-sm font-medium text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors" %>
        <% if @series.executive_producer?(current_user) %>
          <%= link_to "Manage producers", series_series_producers_path(@series), class: "border border-stone-400 dark:border-stone-600 px-4 py-2 text-sm font-medium text-stone-700 dark:text-stone-300 hover:bg-stone-200 dark:hover:bg-stone-800/50 transition-colors" %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if @series.description.present? %>
    <p class="text-stone-600 dark:text-stone-400 mb-8"><%= @series.description %></p>
  <% end %>

  <section class="mb-8">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-semibold text-stone-900 dark:text-white">Cast</h2>
      <% if @series.producer?(current_user) %>
        <%= link_to "New character", new_series_character_path(@series), class: "bg-amber-500 px-4 py-2 text-sm font-semibold text-stone-950 hover:bg-amber-400 transition-colors" %>
      <% end %>
    </div>

    <% if @series.cast.any? %>
      <ul class="space-y-3">
        <% @series.cast.each do |character| %>
          <li class="border border-stone-200 dark:border-stone-700 bg-stone-100 dark:bg-stone-900/50 p-3">
            <%= link_to character.name, character_path(character), class: "font-medium text-amber-600 dark:text-amber-400 hover:text-amber-500 dark:hover:text-amber-300" %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-stone-600 dark:text-stone-400">
        No characters yet.
        <% if @series.producer?(current_user) %>
          <%= link_to "Add one", new_series_character_path(@series), class: "text-amber-600 dark:text-amber-400 hover:text-amber-500 dark:hover:text-amber-300" %>.
        <% end %>
      </p>
    <% end %>
  </section>

  <section>
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-semibold text-stone-900 dark:text-white">Episodes</h2>
      <% if @series.producer?(current_user) %>
        <%= link_to "New episode", new_series_episode_path(@series), class: "bg-amber-500 px-4 py-2 text-sm font-semibold text-stone-950 hover:bg-amber-400 transition-colors" %>
      <% end %>
    </div>

    <% if @series.episodes.any? %>
      <ul class="space-y-3">
        <% @series.episodes.each do |episode| %>
          <li class="border border-stone-200 dark:border-stone-700 bg-stone-100 dark:bg-stone-900/50 p-3">
            <%= link_to episode.title.presence || "Episode", episode_path(episode), class: "font-medium text-amber-600 dark:text-amber-400 hover:text-amber-500 dark:hover:text-amber-300" %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-stone-600 dark:text-stone-400">
        No episodes yet.
        <% if @series.producer?(current_user) %>
          <%= link_to "Add one", new_series_episode_path(@series), class: "text-amber-600 dark:text-amber-400 hover:text-amber-500 dark:hover:text-amber-300" %>.
        <% end %>
      </p>
    <% end %>
  </section>
</div>
